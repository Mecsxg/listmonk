import{n as s,u as i}from"./index-id_R8LyY.js";const r={name:"CampaignPreview",props:{id:{type:Number,default:0},title:{type:String,default:""},type:{type:String,default:""},templateType:{type:String,default:""},body:{type:String,default:""},contentType:{type:String,default:""},templateId:{type:Number,default:0}},data(){return{isVisible:!0,isLoading:!0}},methods:{close(){this.$emit("close"),this.isVisible=!1},onLoaded(a){a.srcElement.contentWindow.location.href!=="about:blank"&&(this.isLoading=!1)}},computed:{previewURL(){let a="about:blank";return this.type==="campaign"?a=i.previewCampaign:this.type==="template"&&(this.id?a=i.previewTemplate:a=i.previewRawTemplate),a.replace(":id",this.id)}},mounted(){setTimeout(()=>{this.$refs.form&&this.$refs.form.submit()},100)}};var o=function(){var e=this,t=e._self._c;return t("div",[t("b-modal",{attrs:{scroll:"keep","aria-modal":!0,active:e.isVisible},on:{close:e.close}},[t("div",[t("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[t("header",{staticClass:"modal-card-head"},[t("h4",[e._v(e._s(e.title))])])]),t("section",{staticClass:"modal-card-body preview",attrs:{expanded:""}},[t("b-loading",{attrs:{active:e.isLoading,"is-full-page":!1}}),e.body?t("form",{ref:"form",attrs:{method:"post",action:e.previewURL,target:"iframe"}},[t("input",{attrs:{type:"hidden",name:"template_id"},domProps:{value:e.templateId}}),t("input",{attrs:{type:"hidden",name:"content_type"},domProps:{value:e.contentType}}),t("input",{attrs:{type:"hidden",name:"template_type"},domProps:{value:e.templateType}}),t("input",{attrs:{type:"hidden",name:"body"},domProps:{value:e.body}})]):e._e(),t("iframe",{ref:"iframe",attrs:{id:"iframe",name:"iframe",title:e.title,src:e.body?"about:blank":e.previewURL},on:{load:e.onLoaded}})],1),t("footer",{staticClass:"modal-card-foot has-text-right"},[t("b-button",{on:{click:e.close}},[e._v(" "+e._s(e.$t("globals.buttons.close"))+" ")])],1)])])],1)},n=[],d=s(r,o,n);const p=d.exports;export{p as C};
